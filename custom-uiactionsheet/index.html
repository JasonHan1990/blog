
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Juncheng&#39;s Blog">
    <title>Custom UIActionSheet - Juncheng&#39;s Blog</title>
    <meta name="author" content="Juncheng Han">
    
    
        <link rel="icon" href="/assets/images/favicn.png">
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="../atom.xml">
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"Website","@id":"https://jasonhan1990.github.io","author":{"@type":"Person","name":"Juncheng Han","sameAs":["https://github.com/JasonHan1990","https://www.linkedin.com/in/junchenghan","mailto:namrie1990@gmail.com","https://www.dropbox.com/sh/a8czjo2chheae47/AABZy0UBJfYmues8s63EkHNva?dl=0"],"image":"avatar.jpg"},"name":"Juncheng's Blog","description":"Juncheng Han","url":"https://jasonhan1990.github.io"}</script>
    <meta name="description" content="aboutThe app which I am currently doing has social functions, so I did some features for searching friends on our server and , of course, managing those connections. It is easy to use a UIActionSheet">
<meta property="og:type" content="blog">
<meta property="og:title" content="Custom UIActionSheet">
<meta property="og:url" content="https://jasonhan1990.github.io/custom-uiactionsheet/index.html">
<meta property="og:site_name" content="Juncheng&#39;s Blog">
<meta property="og:description" content="aboutThe app which I am currently doing has social functions, so I did some features for searching friends on our server and , of course, managing those connections. It is easy to use a UIActionSheet">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://jasonhan1990.github.io/custom-uiactionsheet/Custom-UIActionSheet-1.png">
<meta property="og:image" content="https://jasonhan1990.github.io/custom-uiactionsheet/Custom-UIActionSheet-2.png">
<meta property="og:updated_time" content="2018-09-25T02:51:50.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Custom UIActionSheet">
<meta name="twitter:description" content="aboutThe app which I am currently doing has social functions, so I did some features for searching friends on our server and , of course, managing those connections. It is easy to use a UIActionSheet">
<meta name="twitter:image" content="https://jasonhan1990.github.io/custom-uiactionsheet/Custom-UIActionSheet-1.png">
    
    
        
    
    
        <meta property="og:image" content="https://jasonhan1990.github.io../assets/images/avatar.jpg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="../assets/css/all.css">
    <link rel="stylesheet" href="../assets/css/jquery.fancybox.css">
    <link rel="stylesheet" href="../assets/css/thumbs.css">
    <link rel="stylesheet" href="../assets/css/tranquilpeak.css">
    <link rel="stylesheet" href="../assets/css/materialize.css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-126130510-1', 'auto');
        ga('send', 'pageview');
    </script>


    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="../ ">Juncheng&#39;s Blog</a>
    </div>
    
        
            <a class="header-right-icon " href="#about">
        
        
            <i class="avatar.jpg fa-lg"></i>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="2">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="../#about">
                    <img class="sidebar-profile-picture" src="../assets/images/avatar.jpg" alt="Author&#39;s picture">
                </a>
                <h4 class="sidebar-profile-name">Juncheng Han</h4>
                
                    <h5 class="sidebar-profile-bio"><p>Software Engineer in San Francisco Bay Area</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="../ " title="Home 主页">
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home 主页</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="../projects" title="Projects 项目">
                    
                        <i class="sidebar-button-icon fa fa-th" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Projects 项目</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="../all-categories" title="Categories 分类">
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories 分类</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="../all-tags" title="Tags 标签">
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags 标签</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="../all-archives" title="Archives 归档">
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives 归档</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://github.com/JasonHan1990" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://www.linkedin.com/in/junchenghan" target="_blank" rel="noopener" title="LinkedIn 领英">
                    
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn 领英</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="mailto:namrie1990@gmail.com" target="_blank" rel="noopener" title="Mail 邮箱">
                    
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail 邮箱</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://www.dropbox.com/sh/a8czjo2chheae47/AABZy0UBJfYmues8s63EkHNva?dl=0" target="_blank" rel="noopener" title="Résumé 简历">
                    
                        <i class="sidebar-button-icon fa fa-file" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Résumé 简历</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="../atom.xml" title="RSS">
                    
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="2"
                 class="
                        hasCoverMetaIn
                        ">
                

<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Custom UIActionSheet
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2018-09-24T19:38:56-07:00">
	
		    Sep 24, 2018
    	
    </time>
    
</div>

    
</div>

    
    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <h3 id="about"><a href="#about" class="headerlink" title="about"></a>about</h3><p>The app which I am currently doing has social functions, so I did some features for searching friends on our server and , of course, managing those connections. It is easy to use a UIActionSheet to show user different managing choices such as unfollow, block, connect and disconnect. But it is easy for user to forget which friend is chosen. Of course, you can set some  information to UIActionSheet’s title and description, but how about making things much nicer. So what I did is to create a custom action sheet which can show friend’s image and other information directly in the description area. </p>
<p>The images below are showing you the difference between custom action sheet and UIActionSheet. I try my best to make the custom one look like what apple did.</p>
<div class="figure center" style="width:;"><a class="fancybox" href="Custom-UIActionSheet-1.png" title="Difference between custom and original" data-caption="Difference between custom and original" data-fancybox="default"><img class="fig-img" src="Custom-UIActionSheet-1.png" alt="Difference between custom and original"></a><span class="caption">Difference between custom and original</span></div>
<p>The init function in .h file looks like this:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">id</span>)initWithImage:(<span class="built_in">UIImage</span> *)titleImage </span><br><span class="line">              title:(<span class="built_in">NSString</span> *)title </span><br><span class="line">           delegate:(<span class="keyword">id</span>)delegate </span><br><span class="line">  cancelButtonTitle:(<span class="built_in">NSString</span> *)cancelButtonTitle </span><br><span class="line">  otherButtonTitles:(<span class="built_in">NSString</span> *)otherButtonTitles, ...NS_REQUIRES_NIL_TERMINATION;</span><br></pre></td></tr></table></figure>
<p>Notice there is a <code>NS_REQUIRES_NIL_TERMINATION</code> at the end of the init code. The <code>NS_REQUIRES_NIL_TERMINATION</code> part is a macro that tells the compiler that invocations of this method must include a nil-terminated list of arguments. With <code>NS_REQUIRES_NIL_TERMINATION</code>, when you init a custom action sheet, Xcode will automatically add nil at the end of the code. It looks like this:</p>
<div class="figure center" style="width:;"><a class="fancybox" href="Custom-UIActionSheet-2.png" title data-caption data-fancybox="default"><img class="fig-img" src="Custom-UIActionSheet-2.png" alt></a></div>
<p>Well, Xcode is smart. But if you forget to put the nil at the end of otherButtonTitles, the compiler won’t know where to stop. The app will crash. There is one piece of code in init function:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">va_list args;</span><br><span class="line">va_start(args, otherButtonTitles);</span><br><span class="line"><span class="keyword">if</span> (otherButtonTitles) &#123;</span><br><span class="line">    [_buttonTitleArray addObject:otherButtonTitles];</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">NSString</span> *otherButtonTitle = va_arg(args, <span class="built_in">NSString</span> *);</span><br><span class="line">        <span class="keyword">if</span> (otherButtonTitle == <span class="literal">nil</span>) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            [_buttonTitleArray addObject:otherButtonTitle];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">va_end(args);</span><br></pre></td></tr></table></figure>
<p><code>va_arg(args, NSString *)</code> will not stop get next NSString object if there is no nil in the init code.</p>
<p>The rest of things are implementing interface,  creating show and hide animation and making pressed delegate. For delegate, there is a NSMutableArray which contains all the buttons the code creates. When one button is pressed, you find the index of the button and send it back to the viewController. Make sure the delegate and the delegate function are not nil.</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)buttonPressed:(<span class="built_in">UIButton</span> *)button &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>.delegate &amp;&amp; [<span class="keyword">self</span>.delegate respondsToSelector:<span class="keyword">@selector</span>(actionSheet:clickedButtonIndex:)]) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; _buttonArray.count; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (button == _buttonArray[i]) &#123;</span><br><span class="line">                [_delegate actionSheet:<span class="keyword">self</span> clickedButtonIndex:i];</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    [<span class="keyword">self</span> hide];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
            

        </div>
    </div>
    <!-- projects grid -->
    
    <div id="post-footer" class="post-footer main-content-wrap">
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://jasonhan1990.github.io/custom-uiactionsheet/index.html" title="Share on Facebook">
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://jasonhan1990.github.io/custom-uiactionsheet/index.html" title="Share on Twitter">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://jasonhan1990.github.io/custom-uiactionsheet/index.html" title="Share on Weibo">
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=https://jasonhan1990.github.io/custom-uiactionsheet/index.html&amp;title=Custom UIActionSheet" title="Share on QQ">
                    <i class="fab fa-qq" aria-hidden="true"></i>
                </a>
            </li>
        
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
    </div>
</article>

                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2019 Juncheng Han. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="../assets/images/avatar.jpg" alt="Author&#39;s picture">
        
            <h4 id="about-card-name">Juncheng Han</h4>
        
            <div id="about-card-bio"><p>Software Engineer in San Francisco Bay Area</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br>
                <p>iOS and NodeJS Dev</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br>
                Sunnyvale, CA
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('../assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="../assets/js/jquery.js"></script>
<script src="../assets/js/jquery.fancybox.js"></script>
<script src="../assets/js/thumbs.js"></script>
<script src="../assets/js/tranquilpeak.js"></script>
<!--SCRIPTS END-->



    </body>
</html>
